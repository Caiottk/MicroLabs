


ARM Macro Assembler    Page 1 


    1 00000000         ;lcd.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Codigo que apresenta algumas funcionalidades:
    4 00000000         ; LCD_init
    5 00000000         ; LCD_reset
    6 00000000         ; LCD_command
    7 00000000         ; LCD_write_data
    8 00000000         
    9 00000000         ; ------------------------------------------------------
                       -------------------------
   10 00000000                 THUMB                        ; instrucoes do tip
                                                            o Thumb-2
   11 00000000         ; ------------------------------------------------------
                       -------------------------
   12 00000000         ; Declaracoes EQU - Defines
   13 00000000         ; ========================
   14 00000000         ; Definicoes dos Registradores Gerais
   15 00000000 400FE608 
                       SYSCTL_RCGCGPIO_R
                               EQU              0x400FE608
   16 00000000 400FEA08 
                       SYSCTL_PRGPIO_R
                               EQU              0x400FEA08
   17 00000000         ; ========================
   18 00000000         ; Definicoes dos Ports
   19 00000000         
   20 00000000         ; PORT K
   21 00000000 00000200 
                       GPIO_PORTK
                               EQU              2_1000000000
   22 00000000 40061000 
                       GPIO_PORTK_DATA_BITS_R
                               EQU              0x40061000
   23 00000000 400613FC 
                       GPIO_PORTK_DATA_R
                               EQU              0x400613FC
   24 00000000 40061400 
                       GPIO_PORTK_DIR_R
                               EQU              0x40061400
   25 00000000 40061404 
                       GPIO_PORTK_IS_R
                               EQU              0x40061404
   26 00000000 40061408 
                       GPIO_PORTK_IBE_R
                               EQU              0x40061408
   27 00000000 4006140C 
                       GPIO_PORTK_IEV_R
                               EQU              0x4006140C
   28 00000000 40061410 
                       GPIO_PORTK_IM_R
                               EQU              0x40061410
   29 00000000 40061414 
                       GPIO_PORTK_RIS_R
                               EQU              0x40061414
   30 00000000 40061418 
                       GPIO_PORTK_MIS_R
                               EQU              0x40061418
   31 00000000 4006141C 
                       GPIO_PORTK_ICR_R



ARM Macro Assembler    Page 2 


                               EQU              0x4006141C
   32 00000000 40061420 
                       GPIO_PORTK_AFSEL_R
                               EQU              0x40061420
   33 00000000 40061500 
                       GPIO_PORTK_DR2R_R
                               EQU              0x40061500
   34 00000000 40061504 
                       GPIO_PORTK_DR4R_R
                               EQU              0x40061504
   35 00000000 40061508 
                       GPIO_PORTK_DR8R_R
                               EQU              0x40061508
   36 00000000 4006150C 
                       GPIO_PORTK_ODR_R
                               EQU              0x4006150C
   37 00000000 40061510 
                       GPIO_PORTK_PUR_R
                               EQU              0x40061510
   38 00000000 40061514 
                       GPIO_PORTK_PDR_R
                               EQU              0x40061514
   39 00000000 40061518 
                       GPIO_PORTK_SLR_R
                               EQU              0x40061518
   40 00000000 4006151C 
                       GPIO_PORTK_DEN_R
                               EQU              0x4006151C
   41 00000000 40061520 
                       GPIO_PORTK_LOCK_R
                               EQU              0x40061520
   42 00000000 40061524 
                       GPIO_PORTK_CR_R
                               EQU              0x40061524
   43 00000000 40061528 
                       GPIO_PORTK_AMSEL_R
                               EQU              0x40061528
   44 00000000 4006152C 
                       GPIO_PORTK_PCTL_R
                               EQU              0x4006152C
   45 00000000 40061530 
                       GPIO_PORTK_ADCCTL_R
                               EQU              0x40061530
   46 00000000 40061534 
                       GPIO_PORTK_DMACTL_R
                               EQU              0x40061534
   47 00000000 40061538 
                       GPIO_PORTK_SI_R
                               EQU              0x40061538
   48 00000000 4006153C 
                       GPIO_PORTK_DR12R_R
                               EQU              0x4006153C
   49 00000000 40061540 
                       GPIO_PORTK_WAKEPEN_R
                               EQU              0x40061540
   50 00000000 40061544 
                       GPIO_PORTK_WAKELVL_R
                               EQU              0x40061544
   51 00000000 40061548 



ARM Macro Assembler    Page 3 


                       GPIO_PORTK_WAKESTAT_R
                               EQU              0x40061548
   52 00000000 40061FC0 
                       GPIO_PORTK_PP_R
                               EQU              0x40061FC0
   53 00000000 40061FC4 
                       GPIO_PORTK_PC_R
                               EQU              0x40061FC4
   54 00000000         
   55 00000000         ; PORT M
   56 00000000 40063000 
                       GPIO_PORTM_DATA_BITS_R
                               EQU              0x40063000
   57 00000000 400633FC 
                       GPIO_PORTM_DATA_R
                               EQU              0x400633FC
   58 00000000 40063400 
                       GPIO_PORTM_DIR_R
                               EQU              0x40063400
   59 00000000 40063404 
                       GPIO_PORTM_IS_R
                               EQU              0x40063404
   60 00000000 40063408 
                       GPIO_PORTM_IBE_R
                               EQU              0x40063408
   61 00000000 4006340C 
                       GPIO_PORTM_IEV_R
                               EQU              0x4006340C
   62 00000000 40063410 
                       GPIO_PORTM_IM_R
                               EQU              0x40063410
   63 00000000 40063414 
                       GPIO_PORTM_RIS_R
                               EQU              0x40063414
   64 00000000 40063418 
                       GPIO_PORTM_MIS_R
                               EQU              0x40063418
   65 00000000 4006341C 
                       GPIO_PORTM_ICR_R
                               EQU              0x4006341C
   66 00000000 40063420 
                       GPIO_PORTM_AFSEL_R
                               EQU              0x40063420
   67 00000000 40063500 
                       GPIO_PORTM_DR2R_R
                               EQU              0x40063500
   68 00000000 40063504 
                       GPIO_PORTM_DR4R_R
                               EQU              0x40063504
   69 00000000 40063508 
                       GPIO_PORTM_DR8R_R
                               EQU              0x40063508
   70 00000000 4006350C 
                       GPIO_PORTM_ODR_R
                               EQU              0x4006350C
   71 00000000 40063510 
                       GPIO_PORTM_PUR_R
                               EQU              0x40063510
   72 00000000 40063514 



ARM Macro Assembler    Page 4 


                       GPIO_PORTM_PDR_R
                               EQU              0x40063514
   73 00000000 40063518 
                       GPIO_PORTM_SLR_R
                               EQU              0x40063518
   74 00000000 4006351C 
                       GPIO_PORTM_DEN_R
                               EQU              0x4006351C
   75 00000000 40063520 
                       GPIO_PORTM_LOCK_R
                               EQU              0x40063520
   76 00000000 40063524 
                       GPIO_PORTM_CR_R
                               EQU              0x40063524
   77 00000000 40063528 
                       GPIO_PORTM_AMSEL_R
                               EQU              0x40063528
   78 00000000 4006352C 
                       GPIO_PORTM_PCTL_R
                               EQU              0x4006352C
   79 00000000 40063530 
                       GPIO_PORTM_ADCCTL_R
                               EQU              0x40063530
   80 00000000 40063534 
                       GPIO_PORTM_DMACTL_R
                               EQU              0x40063534
   81 00000000 40063538 
                       GPIO_PORTM_SI_R
                               EQU              0x40063538
   82 00000000 4006353C 
                       GPIO_PORTM_DR12R_R
                               EQU              0x4006353C
   83 00000000 40063540 
                       GPIO_PORTM_WAKEPEN_R
                               EQU              0x40063540
   84 00000000 40063544 
                       GPIO_PORTM_WAKELVL_R
                               EQU              0x40063544
   85 00000000 40063548 
                       GPIO_PORTM_WAKESTAT_R
                               EQU              0x40063548
   86 00000000 40063FC0 
                       GPIO_PORTM_PP_R
                               EQU              0x40063FC0
   87 00000000 40063FC4 
                       GPIO_PORTM_PC_R
                               EQU              0x40063FC4
   88 00000000 00000800 
                       GPIO_PORTM
                               EQU              2_100000000000
   89 00000000         
   90 00000000         ; ------------------------------------------------------
                       -------------------------
   91 00000000         ; Area de Codigo - Tudo abaixo da diretiva a seguir sera
                        armazenado na memoria de 
   92 00000000         ; codigo
   93 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   94 00000000         



ARM Macro Assembler    Page 5 


   95 00000000         ; Se alguma funcao do arquivo for chamada em outro arqui
                       vo 
   96 00000000                 EXPORT           LCD_init
   97 00000000                 EXPORT           LCD_GPIOinit
   98 00000000                 EXPORT           LCD_PulaCursorSegundaLinha
   99 00000000                 EXPORT           LCD_ResetLCD
  100 00000000                 EXPORT           LCD_printArrayInLcd
  101 00000000         
  102 00000000                 IMPORT           SysTick_Wait1us
  103 00000000                 IMPORT           SysTick_Wait1ms
  104 00000000         
  105 00000000         ;-------------------------------------------------------
                       -------------------------
  106 00000000         ; Funcao LCD_init
  107 00000000         ; Parametro de entrada: Nao tem
  108 00000000         ; Parametro de saida: Nao tem
  109 00000000         LCD_GPIOinit
  110 00000000         ; 1. Ativar o clock para a porta setando o bit correspon
                       dente no registrador RCGCGPIO,
  111 00000000 485D            LDR              R0, =SYSCTL_RCGCGPIO_R ;carrega
                                                             o endereco do regi
                                                            strador RCGCGPIO
  112 00000002 6801            LDR              R1, [R0]    ;carrega dado do re
                                                            gistrador
  113 00000004 F441 7100       ORR              R1, #GPIO_PORTK ;seta apenas pi
                                                            nos da porta dos PI
                                                            NOS DE DADOS LCD 
  114 00000008 F441 6100       ORR              R1, #GPIO_PORTM ;seta apenas pi
                                                            nos da porta dos PI
                                                            NOS DE COMANDO LCD 
                                                            
  115 0000000C 6001            STR              R1, [R0]    ;move para a memori
                                                            a os bits das porta
                                                            s no endereco do RC
                                                            GCGPIO
  116 0000000E         
  117 0000000E         ; verificar no PRGPIO se a porta esta pronta para uso.
  118 0000000E 485B            LDR              R0, =SYSCTL_PRGPIO_R ;carrega o
                                                             endereco do PRGPIO
                                                             para esperar os GP
                                                            IO ficarem prontos
  119 00000010         Espera_porta
  120 00000010 6801            LDR              R1, [R0]    ;le da memoria o co
                                                            nteudo do endere?o 
                                                            do registrador
  121 00000012 F44F 7200       MOV              R2, #GPIO_PORTK ;LCD - PINOS DE
                                                             DADOS
  122 00000016 F442 6200       ORR              R2, #GPIO_PORTM ;LCD - PINOS DE
                                                             COMANDO
  123 0000001A EA01 0102       AND              R1, R1, R2  ;seleciona apenas o
                                                            s pinos de porta de
                                                             comparacao
  124 0000001E 4211            TST              R1, R2      ;ANDS de R1 com R2
  125 00000020 D0F6            BEQ              Espera_porta ;Se o flag Z=1, vo
                                                            lta para o laco. Se
                                                            n?o continua execut
                                                            ando
  126 00000022         
  127 00000022         ; 2. Limpar o AMSEL para desabilitar a anal?gica



ARM Macro Assembler    Page 6 


  128 00000022 4857            LDR              R0, =GPIO_PORTK_AMSEL_R ;LCD - 
                                                            PINOS DE DADOS
  129 00000024 6801            LDR              R1, [R0]
  130 00000026 F021 01FF       BIC              R1, #0xFF   ; Pinos PK0 a PK7 =
                                                             0: desabilita anal
                                                            ogica
  131 0000002A 6001            STR              R1, [R0]
  132 0000002C         
  133 0000002C 4855            LDR              R0, =GPIO_PORTM_AMSEL_R ;LCD - 
                                                            PINOS DE COMANDOS
  134 0000002E 6801            LDR              R1, [R0]
  135 00000030 F021 0107       BIC              R1, #2_111  ; Pinos M0 a M2 = 0
                                                            : desabilita analog
                                                            ica
  136 00000034 6001            STR              R1, [R0]
  137 00000036         
  138 00000036         ; 3. Limpar PCTL para selecionar o GPIO
  139 00000036 4854            LDR              R0, =GPIO_PORTK_PCTL_R ;LCD - P
                                                            INOS DE DADOS
  140 00000038 6801            LDR              R1, [R0]
  141 0000003A F021 01FF       BIC              R1, #0xFF   ; Pinos PK0 a PK7 =
                                                             0: seleciona modo 
                                                            GPIO
  142 0000003E 6001            STR              R1, [R0]
  143 00000040         
  144 00000040 4852            LDR              R0, =GPIO_PORTM_PCTL_R ;LCD - P
                                                            INOS DE COMANDOS
  145 00000042 6801            LDR              R1, [R0]
  146 00000044 F021 0107       BIC              R1, #2_111  ; Pinos M0 a M2 = 0
                                                            : seleciona modo GP
                                                            IO
  147 00000048 6001            STR              R1, [R0]
  148 0000004A         
  149 0000004A         ; 4. DIR para 0: input (BIC), 1: output (ORR)
  150 0000004A 4851            LDR              R0, =GPIO_PORTK_DIR_R
  151 0000004C 6801            LDR              R1, [R0]
  152 0000004E F041 01FF       ORR              R1, R1, #0xFF ; pinos PK0 a PK7
                                                             = 1: output
  153 00000052 6001            STR              R1, [R0]
  154 00000054         
  155 00000054 484F            LDR              R0, =GPIO_PORTM_DIR_R
  156 00000056 6801            LDR              R1, [R0]
  157 00000058 F041 0107       ORR              R1, R1, #2_111 ; pinos M0 a M2 
                                                            = 1: output
  158 0000005C 6001            STR              R1, [R0]
  159 0000005E         
  160 0000005E         ; 5. Limpar os bits AFSEL para 0 para selecionar GPIO se
                       m funcao alternativa
  161 0000005E 484E            LDR              R0, =GPIO_PORTK_AFSEL_R
  162 00000060 6801            LDR              R1, [R0]
  163 00000062 F021 01FF       BIC              R1, R1, #0xFF ; pinos PK0 a PK7
                                                             = 0: sem funcao al
                                                            ternativa
  164 00000066 6001            STR              R1, [R0]
  165 00000068         
  166 00000068 484C            LDR              R0, =GPIO_PORTM_AFSEL_R
  167 0000006A 6801            LDR              R1, [R0]
  168 0000006C F021 0107       BIC              R1, R1, #2_111 ;pinos M0 a M2 =
                                                             0: sem funcao alte



ARM Macro Assembler    Page 7 


                                                            rnativa
  169 00000070 6001            STR              R1, [R0]
  170 00000072         
  171 00000072         ; 6. Setar os bits de DEN para habilitar I/O digital
  172 00000072 484B            LDR              R0, =GPIO_PORTK_DEN_R ;LCD - PI
                                                            NOS DE DADOS
  173 00000074 6801            LDR              R1, [R0]
  174 00000076 F041 01FF       ORR              R1, R1, #0xFF ; pinos K0 a K7 =
                                                             1: habilita I/O di
                                                            gital
  175 0000007A 6001            STR              R1, [R0]
  176 0000007C         
  177 0000007C 4849            LDR              R0, =GPIO_PORTM_DEN_R ;LCD - PI
                                                            NOS DE COMANDOS
  178 0000007E 6801            LDR              R1, [R0]
  179 00000080 F041 0107       ORR              R1, R1, #2_111 ; pinos M0 a M3 
                                                            = 1 : habilita I/O 
                                                            digital
  180 00000084 6001            STR              R1, [R0]
  181 00000086         
  182 00000086         ; 7. Para habilitar resistor de pull-up interno, setar P
                       UR para 1
  183 00000086         ; N/A
  184 00000086         
  185 00000086 4770            BX               LR
  186 00000088         
  187 00000088         
  188 00000088         ; ------------------------------------------------------
                       -------------------------
  189 00000088         ; Funcao lcd_enable_and_wait - Da um enable no LCD, espe
                       ra por 2ms e da um disable e espera 2ms
  190 00000088         ; Parametro de entrada: Nao tem
  191 00000088         ; Parametro de saida: Nao tem
  192 00000088         lcd_enable_and_wait                  ;Depois dividir a f
                                                            uncao em wait 40us 
                                                            e wait 1,64ms
  193 00000088         ;EN como 1 para habilitar - EN -> PM2
  194 00000088 4947            LDR              R1, =GPIO_PORTM_DATA_R ;Carrega
                                                            -se o endereco
  195 0000008A 6808            LDR              R0, [R1]    ; Le para carregar 
                                                            o valor anterior da
                                                             porta inteira
  196 0000008C F040 0004       ORR              R0, R0, #2_00000100 ; Faz o OR 
                                                            bit a bit para mant
                                                            er os valores anter
                                                            iores e setar somen
                                                            te o bit
  197 00000090 6008            STR              R0, [R1]    ; Escreve o novo va
                                                            lor da porta
  198 00000092         
  199 00000092 B500            PUSH             { LR }
  200 00000094 F04F 000A       MOV              R0, #10
  201 00000098 F7FF FFFE       BL               SysTick_Wait1us
  202 0000009C F85D EB04       POP              { LR }
  203 000000A0         
  204 000000A0         ;EN como 0 para desabilitar - EN -> PM2
  205 000000A0 4941            LDR              R1, =GPIO_PORTM_DATA_R ;Carrega
                                                            -se o endereco
  206 000000A2 6808            LDR              R0, [R1]    ; Le para carregar 



ARM Macro Assembler    Page 8 


                                                            o valor anterior da
                                                             porta inteira
  207 000000A4 F020 0004       BIC              R0, R0, #2_00000100 ; Faz o AND
                                                             negado bit a bit p
                                                            ara manter os valor
                                                            es anteriores e lim
                                                            par somente o bit 0
                                                            
  208 000000A8 6008            STR              R0, [R1]    ; Escreve o novo va
                                                            lor da porta
  209 000000AA         
  210 000000AA B500            PUSH             { LR }
  211 000000AC F04F 0002       MOV              R0, #2
  212 000000B0 F7FF FFFE       BL               SysTick_Wait1ms
  213 000000B4 F85D EB04       POP              { LR }
  214 000000B8         
  215 000000B8 4770            BX               LR
  216 000000BA         
  217 000000BA         ; ------------------------------------------------------
                       -------------------------
  218 000000BA         ; Funcao set_RS_0 - Seta o RS do LCD como 0
  219 000000BA         ; Parametro de entrada: Nao tem
  220 000000BA         ; Parametro de saida: Nao tem
  221 000000BA         set_RS_0
  222 000000BA         ;RS como 0 para enviar instrucao - RS -> PM0 
  223 000000BA 493B            LDR              R1, =GPIO_PORTM_DATA_R ;Carrega
                                                            -se o endereco
  224 000000BC 6808            LDR              R0, [R1]    ; Le para carregar 
                                                            o valor anterior da
                                                             porta inteira
  225 000000BE F020 0001       BIC              R0, R0, #2_00000001 ; Faz o AND
                                                             negado bit a bit p
                                                            ara manter os valor
                                                            es anteriores e lim
                                                            par somente o bit 0
                                                            
  226 000000C2 6008            STR              R0, [R1]    ; Escreve o novo va
                                                            lor da porta
  227 000000C4         
  228 000000C4 4770            BX               LR
  229 000000C6         
  230 000000C6         ; ------------------------------------------------------
                       -------------------------
  231 000000C6         ; Funcao set_RS_1 - Seta o RS do LCD como 1
  232 000000C6         ; Parametro de entrada: Nao tem
  233 000000C6         ; Parametro de saida: Nao tem
  234 000000C6         set_RS_1
  235 000000C6         ;RS como 1 para enviar dados - RS -> PM0 
  236 000000C6 4938            LDR              R1, =GPIO_PORTM_DATA_R ;Carrega
                                                            -se o endereco
  237 000000C8 6808            LDR              R0, [R1]    ; Le para carregar 
                                                            o valor anterior da
                                                             porta inteira
  238 000000CA F040 0001       ORR              R0, R0, #2_00000001 ; Faz o OR 
                                                            bit a bit para mant
                                                            er os valores anter
                                                            iores e setar somen
                                                            te o bit
  239 000000CE 6008            STR              R0, [R1]    ; Escreve o novo va



ARM Macro Assembler    Page 9 


                                                            lor da porta
  240 000000D0         
  241 000000D0 4770            BX               LR
  242 000000D2         
  243 000000D2         ; ------------------------------------------------------
                       -------------------------
  244 000000D2         ; Funcao envia_instrucao_lcd - Envia um comando para o L
                       CD
  245 000000D2         ; Parametro de entrada: R0 -> Comando a ser enviado
  246 000000D2         ; Parametro de saida: Nao tem 
  247 000000D2         envia_instrucao_lcd
  248 000000D2 4936            LDR              R1, =GPIO_PORTK_DATA_R
  249 000000D4 6008            STR              R0, [R1]
  250 000000D6         
  251 000000D6 B500            PUSH             { LR }
  252 000000D8 F7FF FFEF       BL               set_RS_0
  253 000000DC F85D EB04       POP              { LR }
  254 000000E0         
  255 000000E0 B500            PUSH             { LR }
  256 000000E2 F7FF FFD1       BL               lcd_enable_and_wait
  257 000000E6 F85D EB04       POP              { LR }
  258 000000EA         
  259 000000EA 4770            BX               LR
  260 000000EC         
  261 000000EC         ; ------------------------------------------------------
                       -------------------------
  262 000000EC         ; Funcao envia_dado_lcd - Envia um dado para o LCD
  263 000000EC         ; Parametro de entrada: R1 -> Dado a ser enviado
  264 000000EC         ; Parametro de saida: Nao tem 
  265 000000EC         envia_dado_lcd
  266 000000EC 482F            LDR              R0, =GPIO_PORTK_DATA_R
  267 000000EE 6001            STR              R1, [R0]
  268 000000F0         
  269 000000F0 B500            PUSH             { LR }
  270 000000F2 F7FF FFE8       BL               set_RS_1
  271 000000F6 F85D EB04       POP              { LR }
  272 000000FA         
  273 000000FA B500            PUSH             { LR }
  274 000000FC F7FF FFC4       BL               lcd_enable_and_wait
  275 00000100 F85D EB04       POP              { LR }
  276 00000104         
  277 00000104 4770            BX               LR
  278 00000106         
  279 00000106         ; ------------------------------------------------------
                       -------------------------
  280 00000106         ; Funcao LCD_printArrayInLcd - Escreve uma string no LCD
                       
  281 00000106         ; Parametro de entrada: R0 -> Endereco de memoria de ini
                       cio da string
  282 00000106         ; Parametro de saida: Nao tem 
  283 00000106         LCD_printArrayInLcd
  284 00000106 460A            MOV              R2, R1
  285 00000108         escrever_proximo
  286 00000108 F810 1B01       LDRB             R1, [R0], #1
  287 0000010C B501            PUSH             { LR, R0 }
  288 0000010E F7FF FFED       BL               envia_dado_lcd
  289 00000112 E8BD 4001       POP              { R0, LR }
  290 00000116 F1A2 0201       SUB              R2, #1
  291 0000011A 2A00            CMP              R2, #0



ARM Macro Assembler    Page 10 


  292 0000011C D000            BEQ              LCD_printArrayInLcdEnd
  293 0000011E E7F3            B                escrever_proximo
  294 00000120         LCD_printArrayInLcdEnd
  295 00000120 4770            BX               LR
  296 00000122         
  297 00000122         ; ------------------------------------------------------
                       -------------------------
  298 00000122         ; Funcao LCD_ResetLCD - Reseta o LCD
  299 00000122         ; Parametro de entrada: Nao tem
  300 00000122         ; Parametro de saida: Nao tem 
  301 00000122         LCD_ResetLCD
  302 00000122         ; Reset LCD
  303 00000122 F04F 0001       MOV              R0, #0x01
  304 00000126 B502            PUSH             { LR, R1 }
  305 00000128 F7FF FFD3       BL               envia_instrucao_lcd
  306 0000012C E8BD 4002       POP              { R1, LR }
  307 00000130 4770            BX               LR
  308 00000132         
  309 00000132         ; ------------------------------------------------------
                       -------------------------
  310 00000132         ; Funcao LCD_PulaCursorSegundaLinha - Manda o cursor par
                       a a segunda linha do LCD
  311 00000132         ; Parametro de entrada: Nao tem
  312 00000132         ; Parametro de saida: Nao tem 
  313 00000132         LCD_PulaCursorSegundaLinha
  314 00000132         ; Reset LCD
  315 00000132 F04F 00C0       MOV              R0, #0xC0
  316 00000136 B502            PUSH             { LR, R1 }
  317 00000138 F7FF FFCB       BL               envia_instrucao_lcd
  318 0000013C E8BD 4002       POP              { R1, LR }
  319 00000140 4770            BX               LR
  320 00000142         ; ------------------------------------------------------
                       -------------------------
  321 00000142         ; Funcao LCD_init - Inicializa o LCD
  322 00000142         ; Parametro de entrada: Nao tem
  323 00000142         ; Parametro de saida: Nao tem 
  324 00000142         LCD_init
  325 00000142         ; Inicializa configuracao do LCD -----------------------
                       ------------------------
  326 00000142 F04F 0038       MOV              R0, #0x38
  327 00000146 B500            PUSH             { LR }
  328 00000148 F7FF FFC3       BL               envia_instrucao_lcd
  329 0000014C F85D EB04       POP              { LR }
  330 00000150         
  331 00000150         ; Autoincrement to the right-----------------
  332 00000150 F04F 0006       MOV              R0, #0x6
  333 00000154 B500            PUSH             { LR }
  334 00000156 F7FF FFBC       BL               envia_instrucao_lcd
  335 0000015A F85D EB04       POP              { LR }
  336 0000015E         
  337 0000015E         ; Inicializa configuracao do LCD -----------------------
                       ------------------------
  338 0000015E F04F 000F       MOV              R0, #0xF
  339 00000162 B500            PUSH             { LR }
  340 00000164 F7FF FFB5       BL               envia_instrucao_lcd
  341 00000168 F85D EB04       POP              { LR }
  342 0000016C         
  343 0000016C         ; Reset no LCD -----------------------------------------
                       ------



ARM Macro Assembler    Page 11 


  344 0000016C B500            PUSH             { LR }
  345 0000016E F7FF FFFE       BL               LCD_ResetLCD
  346 00000172 F85D EB04       POP              { LR }
  347 00000176         
  348 00000176 4770            BX               LR
  349 00000178         
  350 00000178         ; ------------------------------------------------------
                       -------------------------
  351 00000178         ; fim do arquivo
  352 00000178                 ALIGN                        ; garante que o fim
                                                             da se??o est? alin
                                                            hada 
  353 00000178                 END                          ; fim do arquivo
              400FE608 
              400FEA08 
              40061528 
              40063528 
              4006152C 
              4006352C 
              40061400 
              40063400 
              40061420 
              40063420 
              4006151C 
              4006351C 
              400633FC 
              400613FC 
Command Line: --debug --xref --diag_suppress=9931,A1950W --cpu=Cortex-M4.fp.sp 
--depend=.\objects\lcd.d -o.\objects\lcd.o -IC:\Users\joaov\AppData\Local\Arm\P
acks\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL SETA 1" --p
redefine="__UVISION_VERSION SETA 538" --predefine="TM4C1294NCPDT SETA 1" --list
=.\listings\lcd.lst lcd.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 93 in file lcd.s
   Uses
      None
Comment: .text unused
Espera_porta 00000010

Symbol: Espera_porta
   Definitions
      At line 119 in file lcd.s
   Uses
      At line 125 in file lcd.s
Comment: Espera_porta used once
LCD_GPIOinit 00000000

Symbol: LCD_GPIOinit
   Definitions
      At line 109 in file lcd.s
   Uses
      At line 97 in file lcd.s
Comment: LCD_GPIOinit used once
LCD_PulaCursorSegundaLinha 00000132

Symbol: LCD_PulaCursorSegundaLinha
   Definitions
      At line 313 in file lcd.s
   Uses
      At line 98 in file lcd.s
Comment: LCD_PulaCursorSegundaLinha used once
LCD_ResetLCD 00000122

Symbol: LCD_ResetLCD
   Definitions
      At line 301 in file lcd.s
   Uses
      At line 99 in file lcd.s
      At line 345 in file lcd.s

LCD_init 00000142

Symbol: LCD_init
   Definitions
      At line 324 in file lcd.s
   Uses
      At line 96 in file lcd.s
Comment: LCD_init used once
LCD_printArrayInLcd 00000106

Symbol: LCD_printArrayInLcd
   Definitions
      At line 283 in file lcd.s
   Uses
      At line 100 in file lcd.s
Comment: LCD_printArrayInLcd used once
LCD_printArrayInLcdEnd 00000120




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: LCD_printArrayInLcdEnd
   Definitions
      At line 294 in file lcd.s
   Uses
      At line 292 in file lcd.s
Comment: LCD_printArrayInLcdEnd used once
envia_dado_lcd 000000EC

Symbol: envia_dado_lcd
   Definitions
      At line 265 in file lcd.s
   Uses
      At line 288 in file lcd.s
Comment: envia_dado_lcd used once
envia_instrucao_lcd 000000D2

Symbol: envia_instrucao_lcd
   Definitions
      At line 247 in file lcd.s
   Uses
      At line 305 in file lcd.s
      At line 317 in file lcd.s
      At line 328 in file lcd.s
      At line 334 in file lcd.s
      At line 340 in file lcd.s

escrever_proximo 00000108

Symbol: escrever_proximo
   Definitions
      At line 285 in file lcd.s
   Uses
      At line 293 in file lcd.s
Comment: escrever_proximo used once
lcd_enable_and_wait 00000088

Symbol: lcd_enable_and_wait
   Definitions
      At line 192 in file lcd.s
   Uses
      At line 256 in file lcd.s
      At line 274 in file lcd.s

set_RS_0 000000BA

Symbol: set_RS_0
   Definitions
      At line 221 in file lcd.s
   Uses
      At line 252 in file lcd.s
Comment: set_RS_0 used once
set_RS_1 000000C6

Symbol: set_RS_1
   Definitions
      At line 234 in file lcd.s
   Uses
      At line 270 in file lcd.s
Comment: set_RS_1 used once



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

14 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTK 00000200

Symbol: GPIO_PORTK
   Definitions
      At line 21 in file lcd.s
   Uses
      At line 113 in file lcd.s
      At line 121 in file lcd.s

GPIO_PORTK_ADCCTL_R 40061530

Symbol: GPIO_PORTK_ADCCTL_R
   Definitions
      At line 45 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_ADCCTL_R unused
GPIO_PORTK_AFSEL_R 40061420

Symbol: GPIO_PORTK_AFSEL_R
   Definitions
      At line 32 in file lcd.s
   Uses
      At line 161 in file lcd.s
Comment: GPIO_PORTK_AFSEL_R used once
GPIO_PORTK_AMSEL_R 40061528

Symbol: GPIO_PORTK_AMSEL_R
   Definitions
      At line 43 in file lcd.s
   Uses
      At line 128 in file lcd.s
Comment: GPIO_PORTK_AMSEL_R used once
GPIO_PORTK_CR_R 40061524

Symbol: GPIO_PORTK_CR_R
   Definitions
      At line 42 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_CR_R unused
GPIO_PORTK_DATA_BITS_R 40061000

Symbol: GPIO_PORTK_DATA_BITS_R
   Definitions
      At line 22 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_DATA_BITS_R unused
GPIO_PORTK_DATA_R 400613FC

Symbol: GPIO_PORTK_DATA_R
   Definitions
      At line 23 in file lcd.s
   Uses
      At line 248 in file lcd.s
      At line 266 in file lcd.s

GPIO_PORTK_DEN_R 4006151C



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols


Symbol: GPIO_PORTK_DEN_R
   Definitions
      At line 40 in file lcd.s
   Uses
      At line 172 in file lcd.s
Comment: GPIO_PORTK_DEN_R used once
GPIO_PORTK_DIR_R 40061400

Symbol: GPIO_PORTK_DIR_R
   Definitions
      At line 24 in file lcd.s
   Uses
      At line 150 in file lcd.s
Comment: GPIO_PORTK_DIR_R used once
GPIO_PORTK_DMACTL_R 40061534

Symbol: GPIO_PORTK_DMACTL_R
   Definitions
      At line 46 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_DMACTL_R unused
GPIO_PORTK_DR12R_R 4006153C

Symbol: GPIO_PORTK_DR12R_R
   Definitions
      At line 48 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_DR12R_R unused
GPIO_PORTK_DR2R_R 40061500

Symbol: GPIO_PORTK_DR2R_R
   Definitions
      At line 33 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_DR2R_R unused
GPIO_PORTK_DR4R_R 40061504

Symbol: GPIO_PORTK_DR4R_R
   Definitions
      At line 34 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_DR4R_R unused
GPIO_PORTK_DR8R_R 40061508

Symbol: GPIO_PORTK_DR8R_R
   Definitions
      At line 35 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_DR8R_R unused
GPIO_PORTK_IBE_R 40061408

Symbol: GPIO_PORTK_IBE_R
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 26 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_IBE_R unused
GPIO_PORTK_ICR_R 4006141C

Symbol: GPIO_PORTK_ICR_R
   Definitions
      At line 31 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_ICR_R unused
GPIO_PORTK_IEV_R 4006140C

Symbol: GPIO_PORTK_IEV_R
   Definitions
      At line 27 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_IEV_R unused
GPIO_PORTK_IM_R 40061410

Symbol: GPIO_PORTK_IM_R
   Definitions
      At line 28 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_IM_R unused
GPIO_PORTK_IS_R 40061404

Symbol: GPIO_PORTK_IS_R
   Definitions
      At line 25 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_IS_R unused
GPIO_PORTK_LOCK_R 40061520

Symbol: GPIO_PORTK_LOCK_R
   Definitions
      At line 41 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_LOCK_R unused
GPIO_PORTK_MIS_R 40061418

Symbol: GPIO_PORTK_MIS_R
   Definitions
      At line 30 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_MIS_R unused
GPIO_PORTK_ODR_R 4006150C

Symbol: GPIO_PORTK_ODR_R
   Definitions
      At line 36 in file lcd.s
   Uses
      None



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

Comment: GPIO_PORTK_ODR_R unused
GPIO_PORTK_PCTL_R 4006152C

Symbol: GPIO_PORTK_PCTL_R
   Definitions
      At line 44 in file lcd.s
   Uses
      At line 139 in file lcd.s
Comment: GPIO_PORTK_PCTL_R used once
GPIO_PORTK_PC_R 40061FC4

Symbol: GPIO_PORTK_PC_R
   Definitions
      At line 53 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_PC_R unused
GPIO_PORTK_PDR_R 40061514

Symbol: GPIO_PORTK_PDR_R
   Definitions
      At line 38 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_PDR_R unused
GPIO_PORTK_PP_R 40061FC0

Symbol: GPIO_PORTK_PP_R
   Definitions
      At line 52 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_PP_R unused
GPIO_PORTK_PUR_R 40061510

Symbol: GPIO_PORTK_PUR_R
   Definitions
      At line 37 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_PUR_R unused
GPIO_PORTK_RIS_R 40061414

Symbol: GPIO_PORTK_RIS_R
   Definitions
      At line 29 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_RIS_R unused
GPIO_PORTK_SI_R 40061538

Symbol: GPIO_PORTK_SI_R
   Definitions
      At line 47 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_SI_R unused
GPIO_PORTK_SLR_R 40061518




ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

Symbol: GPIO_PORTK_SLR_R
   Definitions
      At line 39 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_SLR_R unused
GPIO_PORTK_WAKELVL_R 40061544

Symbol: GPIO_PORTK_WAKELVL_R
   Definitions
      At line 50 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_WAKELVL_R unused
GPIO_PORTK_WAKEPEN_R 40061540

Symbol: GPIO_PORTK_WAKEPEN_R
   Definitions
      At line 49 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_WAKEPEN_R unused
GPIO_PORTK_WAKESTAT_R 40061548

Symbol: GPIO_PORTK_WAKESTAT_R
   Definitions
      At line 51 in file lcd.s
   Uses
      None
Comment: GPIO_PORTK_WAKESTAT_R unused
GPIO_PORTM 00000800

Symbol: GPIO_PORTM
   Definitions
      At line 88 in file lcd.s
   Uses
      At line 114 in file lcd.s
      At line 122 in file lcd.s

GPIO_PORTM_ADCCTL_R 40063530

Symbol: GPIO_PORTM_ADCCTL_R
   Definitions
      At line 79 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_ADCCTL_R unused
GPIO_PORTM_AFSEL_R 40063420

Symbol: GPIO_PORTM_AFSEL_R
   Definitions
      At line 66 in file lcd.s
   Uses
      At line 166 in file lcd.s
Comment: GPIO_PORTM_AFSEL_R used once
GPIO_PORTM_AMSEL_R 40063528

Symbol: GPIO_PORTM_AMSEL_R
   Definitions



ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Absolute symbols

      At line 77 in file lcd.s
   Uses
      At line 133 in file lcd.s
Comment: GPIO_PORTM_AMSEL_R used once
GPIO_PORTM_CR_R 40063524

Symbol: GPIO_PORTM_CR_R
   Definitions
      At line 76 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_CR_R unused
GPIO_PORTM_DATA_BITS_R 40063000

Symbol: GPIO_PORTM_DATA_BITS_R
   Definitions
      At line 56 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_DATA_BITS_R unused
GPIO_PORTM_DATA_R 400633FC

Symbol: GPIO_PORTM_DATA_R
   Definitions
      At line 57 in file lcd.s
   Uses
      At line 194 in file lcd.s
      At line 205 in file lcd.s
      At line 223 in file lcd.s
      At line 236 in file lcd.s

GPIO_PORTM_DEN_R 4006351C

Symbol: GPIO_PORTM_DEN_R
   Definitions
      At line 74 in file lcd.s
   Uses
      At line 177 in file lcd.s
Comment: GPIO_PORTM_DEN_R used once
GPIO_PORTM_DIR_R 40063400

Symbol: GPIO_PORTM_DIR_R
   Definitions
      At line 58 in file lcd.s
   Uses
      At line 155 in file lcd.s
Comment: GPIO_PORTM_DIR_R used once
GPIO_PORTM_DMACTL_R 40063534

Symbol: GPIO_PORTM_DMACTL_R
   Definitions
      At line 80 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_DMACTL_R unused
GPIO_PORTM_DR12R_R 4006353C

Symbol: GPIO_PORTM_DR12R_R
   Definitions



ARM Macro Assembler    Page 7 Alphabetic symbol ordering
Absolute symbols

      At line 82 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_DR12R_R unused
GPIO_PORTM_DR2R_R 40063500

Symbol: GPIO_PORTM_DR2R_R
   Definitions
      At line 67 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_DR2R_R unused
GPIO_PORTM_DR4R_R 40063504

Symbol: GPIO_PORTM_DR4R_R
   Definitions
      At line 68 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_DR4R_R unused
GPIO_PORTM_DR8R_R 40063508

Symbol: GPIO_PORTM_DR8R_R
   Definitions
      At line 69 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_DR8R_R unused
GPIO_PORTM_IBE_R 40063408

Symbol: GPIO_PORTM_IBE_R
   Definitions
      At line 60 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_IBE_R unused
GPIO_PORTM_ICR_R 4006341C

Symbol: GPIO_PORTM_ICR_R
   Definitions
      At line 65 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_ICR_R unused
GPIO_PORTM_IEV_R 4006340C

Symbol: GPIO_PORTM_IEV_R
   Definitions
      At line 61 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_IEV_R unused
GPIO_PORTM_IM_R 40063410

Symbol: GPIO_PORTM_IM_R
   Definitions
      At line 62 in file lcd.s
   Uses
      None



ARM Macro Assembler    Page 8 Alphabetic symbol ordering
Absolute symbols

Comment: GPIO_PORTM_IM_R unused
GPIO_PORTM_IS_R 40063404

Symbol: GPIO_PORTM_IS_R
   Definitions
      At line 59 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_IS_R unused
GPIO_PORTM_LOCK_R 40063520

Symbol: GPIO_PORTM_LOCK_R
   Definitions
      At line 75 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_LOCK_R unused
GPIO_PORTM_MIS_R 40063418

Symbol: GPIO_PORTM_MIS_R
   Definitions
      At line 64 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_MIS_R unused
GPIO_PORTM_ODR_R 4006350C

Symbol: GPIO_PORTM_ODR_R
   Definitions
      At line 70 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_ODR_R unused
GPIO_PORTM_PCTL_R 4006352C

Symbol: GPIO_PORTM_PCTL_R
   Definitions
      At line 78 in file lcd.s
   Uses
      At line 144 in file lcd.s
Comment: GPIO_PORTM_PCTL_R used once
GPIO_PORTM_PC_R 40063FC4

Symbol: GPIO_PORTM_PC_R
   Definitions
      At line 87 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_PC_R unused
GPIO_PORTM_PDR_R 40063514

Symbol: GPIO_PORTM_PDR_R
   Definitions
      At line 72 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_PDR_R unused
GPIO_PORTM_PP_R 40063FC0




ARM Macro Assembler    Page 9 Alphabetic symbol ordering
Absolute symbols

Symbol: GPIO_PORTM_PP_R
   Definitions
      At line 86 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_PP_R unused
GPIO_PORTM_PUR_R 40063510

Symbol: GPIO_PORTM_PUR_R
   Definitions
      At line 71 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_PUR_R unused
GPIO_PORTM_RIS_R 40063414

Symbol: GPIO_PORTM_RIS_R
   Definitions
      At line 63 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_RIS_R unused
GPIO_PORTM_SI_R 40063538

Symbol: GPIO_PORTM_SI_R
   Definitions
      At line 81 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_SI_R unused
GPIO_PORTM_SLR_R 40063518

Symbol: GPIO_PORTM_SLR_R
   Definitions
      At line 73 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_SLR_R unused
GPIO_PORTM_WAKELVL_R 40063544

Symbol: GPIO_PORTM_WAKELVL_R
   Definitions
      At line 84 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_WAKELVL_R unused
GPIO_PORTM_WAKEPEN_R 40063540

Symbol: GPIO_PORTM_WAKEPEN_R
   Definitions
      At line 83 in file lcd.s
   Uses
      None
Comment: GPIO_PORTM_WAKEPEN_R unused
GPIO_PORTM_WAKESTAT_R 40063548

Symbol: GPIO_PORTM_WAKESTAT_R
   Definitions
      At line 85 in file lcd.s



ARM Macro Assembler    Page 10 Alphabetic symbol ordering
Absolute symbols

   Uses
      None
Comment: GPIO_PORTM_WAKESTAT_R unused
SYSCTL_PRGPIO_R 400FEA08

Symbol: SYSCTL_PRGPIO_R
   Definitions
      At line 16 in file lcd.s
   Uses
      At line 118 in file lcd.s
Comment: SYSCTL_PRGPIO_R used once
SYSCTL_RCGCGPIO_R 400FE608

Symbol: SYSCTL_RCGCGPIO_R
   Definitions
      At line 15 in file lcd.s
   Uses
      At line 111 in file lcd.s
Comment: SYSCTL_RCGCGPIO_R used once
68 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

SysTick_Wait1ms 00000000

Symbol: SysTick_Wait1ms
   Definitions
      At line 103 in file lcd.s
   Uses
      At line 212 in file lcd.s
Comment: SysTick_Wait1ms used once
SysTick_Wait1us 00000000

Symbol: SysTick_Wait1us
   Definitions
      At line 102 in file lcd.s
   Uses
      At line 201 in file lcd.s
Comment: SysTick_Wait1us used once
2 symbols
420 symbols in table
