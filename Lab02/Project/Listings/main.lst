


ARM Macro Assembler    Page 1 


    1 00000000         ; main.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Prof. Guilherme Peron
    4 00000000         ; Ver 1 19/03/2018
    5 00000000         ; Ver 2 26/08/2018
    6 00000000         ; Este programa deve esperar o usuário pressionar uma ch
                       ave.
    7 00000000         ; Caso o usuário pressione uma chave, um LED deve piscar
                        a cada 1 segundo.
    8 00000000         
    9 00000000         ; ------------------------------------------------------
                       -------------------------
   10 00000000                 THUMB                        ; Instruções do tip
                                                            o Thumb-2
   11 00000000         ; ------------------------------------------------------
                       -------------------------
   12 00000000         
   13 00000000         ; Declarações EQU - Defines
   14 00000000         ;<NOME>         EQU <VALOR>
   15 00000000         ; ========================
   16 00000000         ; Definições de Valores
   17 00000000         
   18 00000000 00000008 
                       VECT_SIZE
                               EQU              8
   19 00000000         ; ------------------------------------------------------
                       -------------------------
   20 00000000         ; Área de Dados - Declarações de variáveis
   21 00000000                 AREA             DATA, ALIGN=2
   22 00000000         ; Se alguma variável for chamada em outro arquivo
   23 00000000         ;EXPORT  <var> [DATA,SIZE=<tam>]   ; Permite chamar a va
                       riável <var> a 
   24 00000000         ; partir de outro arquivo
   25 00000000         ;<var> SPACE <tam>                        ; Declara uma 
                       variável de nome <var>
   26 00000000         ; de <tam> bytes a partir da primeira 
   27 00000000         ; posição da RAM  
   28 00000000 00      sysState
                               SPACE            0x1
   29 00000001 00 00 00 
              00       masterPword
                               SPACE            0x4
   30 00000005 00 00 00 
              00       currPword
                               SPACE            0x4
   31 00000009 00 00 00 
              00       guessPword
                               SPACE            0x4
   32 0000000D         ; ------------------------------------------------------
                       -------------------------
   33 0000000D         ; Área de Código - Tudo abaixo da diretiva a seguir será
                        armazenado na memória de 
   34 0000000D         ;                  código
   35 0000000D                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   36 00000000         
   37 00000000         ; Se alguma função do arquivo for chamada em outro arqui
                       vo 
   38 00000000                 EXPORT           Start       ; Permite chamar a 



ARM Macro Assembler    Page 2 


                                                            função Start a part
                                                            ir de 
   39 00000000         ; outro arquivo. No caso startup.s
   40 00000000         
   41 00000000         ; Se chamar alguma função externa 
   42 00000000         ;IMPORT <func>              ; Permite chamar dentro dest
                       e arquivo uma 
   43 00000000         ; função <func>
   44 00000000                 IMPORT           PLL_Init
   45 00000000                 IMPORT           SysTick_Init
   46 00000000                 IMPORT           SysTick_Wait1ms
   47 00000000                 IMPORT           GPIO_Init
   48 00000000                 IMPORT           LightUpLEDs
   49 00000000                 IMPORT           GetPushBtnsState
   50 00000000                 IMPORT           DisableAllLEDs
   51 00000000         
   52 00000000         
   53 00000000         ; ------------------------------------------------------
                       -------------------------
   54 00000000         ; Função main()
   55 00000000         Start
   56 00000000 F7FF FFFE       BL               PLL_Init    ;Chama a subrotina 
                                                            para alterar o cloc
                                                            k do microcontrolad
                                                            or para 80MHz
   57 00000004 F7FF FFFE       BL               SysTick_Init ;Chama a subrotina
                                                             para inicializar o
                                                             SysTick
   58 00000008 F7FF FFFE       BL               GPIO_Init   ;Chama a subrotina 
                                                            que inicializa os G
                                                            PIO
   59 0000000C F000 F817       BL               InitilizeVars
   60 00000010         ;-------------------------------------------------------
                       -------------------------
   61 00000010         MainLoop
   62 00000010 490E            LDR              R1, =sysState
   63 00000012 6809            LDR              R1, [R1]
   64 00000014         
   65 00000014 2900            CMP              R1, #0
   66 00000016 BF08            IT               EQ
   67 00000018 F000 F80D       BLEQ             waitNewPword
   68 0000001C         
   69 0000001C 2901            CMP              R1, #1
   70 0000001E BF08            IT               EQ
   71 00000020 F000 F80A       BLEQ             closedSafe
   72 00000024         
   73 00000024 2902            CMP              R1, #2
   74 00000026 BF08            IT               EQ
   75 00000028 F000 F807       BLEQ             waitJ0Interrup
   76 0000002C         
   77 0000002C 2901            CMP              R1, #1
   78 0000002E BF08            IT               EQ
   79 00000030 F000 F804       BLEQ             waitMasterPword
   80 00000034         
   81 00000034 E7EC            B                MainLoop
   82 00000036         
   83 00000036         ;-------------------------------------------------------
                       -------------------------
   84 00000036         ; Routine for entering a new password and close the safe



ARM Macro Assembler    Page 3 


                       
   85 00000036         waitNewPword
   86 00000036         
   87 00000036 4770            BX               LR
   88 00000038         ;-------------------------------------------------------
                       -------------------------
   89 00000038         ; Routine for when the safe is closed: either opens or l
                       ocks permanently
   90 00000038         closedSafe
   91 00000038         
   92 00000038 4770            BX               LR
   93 0000003A         ;-------------------------------------------------------
                       -------------------------
   94 0000003A         ; Routine that waits for a interruption and disables all
                        other funcions
   95 0000003A         waitJ0Interrup
   96 0000003A         
   97 0000003A 4770            BX               LR
   98 0000003C         ;-------------------------------------------------------
                       -------------------------
   99 0000003C         ; Routine to check if the master password was correctly 
                       written
  100 0000003C         waitMasterPword
  101 0000003C         
  102 0000003C 4770            BX               LR
  103 0000003E         ;-------------------------------------------------------
                       -------------------------
  104 0000003E         ; Initializes the first array pos and the multiplicator 
                       factor with 1, as requested
  105 0000003E         InitilizeVars
  106 0000003E 4904            LDR              R1, =masterPword
  107 00000040 F44F 7241       MOV              R2, #0x0304
  108 00000044 F2C0 1202       MOVT             R2, #0x0102
  109 00000048 600A            STR              R2, [R1]
  110 0000004A         
  111 0000004A 4770            BX               LR
  112 0000004C         
  113 0000004C         ; ------------------------------------------------------
                       --------------------------------------------------------
                       -----------
  114 0000004C         ; Fim do Arquivo
  115 0000004C         ; ------------------------------------------------------
                       --------------------------------------------------------
                       ----------- 
  116 0000004C                 ALIGN                        ;Garante que o fim 
                                                            da seção está alinh
                                                            ada 
  117 0000004C                 END                          ;Fim do arquivo
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931,A1950W --cpu=Cortex-M4.fp.sp 
--depend=.\objects\main.d -o.\objects\main.o -IC:\Users\joaov\AppData\Local\Arm
\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 --predefine="__EVAL SETA 1" -
-predefine="__UVISION_VERSION SETA 538" --predefine="TM4C1294NCPDT SETA 1" --li
st=.\listings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DATA 00000000

Symbol: DATA
   Definitions
      At line 21 in file main.s
   Uses
      None
Comment: DATA unused
currPword 00000005

Symbol: currPword
   Definitions
      At line 30 in file main.s
   Uses
      None
Comment: currPword unused
guessPword 00000009

Symbol: guessPword
   Definitions
      At line 31 in file main.s
   Uses
      None
Comment: guessPword unused
masterPword 00000001

Symbol: masterPword
   Definitions
      At line 29 in file main.s
   Uses
      At line 106 in file main.s
Comment: masterPword used once
sysState 00000000

Symbol: sysState
   Definitions
      At line 28 in file main.s
   Uses
      At line 62 in file main.s
Comment: sysState used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 35 in file main.s
   Uses
      None
Comment: .text unused
InitilizeVars 0000003E

Symbol: InitilizeVars
   Definitions
      At line 105 in file main.s
   Uses
      At line 59 in file main.s
Comment: InitilizeVars used once
MainLoop 00000010

Symbol: MainLoop
   Definitions
      At line 61 in file main.s
   Uses
      At line 81 in file main.s
Comment: MainLoop used once
Start 00000000

Symbol: Start
   Definitions
      At line 55 in file main.s
   Uses
      At line 38 in file main.s
Comment: Start used once
closedSafe 00000038

Symbol: closedSafe
   Definitions
      At line 90 in file main.s
   Uses
      At line 71 in file main.s
Comment: closedSafe used once
waitJ0Interrup 0000003A

Symbol: waitJ0Interrup
   Definitions
      At line 95 in file main.s
   Uses
      At line 75 in file main.s
Comment: waitJ0Interrup used once
waitMasterPword 0000003C

Symbol: waitMasterPword
   Definitions
      At line 100 in file main.s
   Uses
      At line 79 in file main.s
Comment: waitMasterPword used once
waitNewPword 00000036

Symbol: waitNewPword



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 85 in file main.s
   Uses
      At line 67 in file main.s
Comment: waitNewPword used once
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

VECT_SIZE 00000008

Symbol: VECT_SIZE
   Definitions
      At line 18 in file main.s
   Uses
      None
Comment: VECT_SIZE unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

DisableAllLEDs 00000000

Symbol: DisableAllLEDs
   Definitions
      At line 50 in file main.s
   Uses
      None
Comment: DisableAllLEDs unused
GPIO_Init 00000000

Symbol: GPIO_Init
   Definitions
      At line 47 in file main.s
   Uses
      At line 58 in file main.s
Comment: GPIO_Init used once
GetPushBtnsState 00000000

Symbol: GetPushBtnsState
   Definitions
      At line 49 in file main.s
   Uses
      None
Comment: GetPushBtnsState unused
LightUpLEDs 00000000

Symbol: LightUpLEDs
   Definitions
      At line 48 in file main.s
   Uses
      None
Comment: LightUpLEDs unused
PLL_Init 00000000

Symbol: PLL_Init
   Definitions
      At line 44 in file main.s
   Uses
      At line 56 in file main.s
Comment: PLL_Init used once
SysTick_Init 00000000

Symbol: SysTick_Init
   Definitions
      At line 45 in file main.s
   Uses
      At line 57 in file main.s
Comment: SysTick_Init used once
SysTick_Wait1ms 00000000

Symbol: SysTick_Wait1ms
   Definitions
      At line 46 in file main.s
   Uses
      None
Comment: SysTick_Wait1ms unused
7 symbols
357 symbols in table
